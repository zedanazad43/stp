  - name: Set up Node (optional, for build)
    uses: actions/setup-node@v4
    with:
      node-version: "20"

  - name: Install and build
    run: |
      npm ci
      npm run build || true

  - name: Deploy to Fly
    uses: superfly/flyctl-actions@v1
    with:
      args: "deploy --config fly.toml --remote-only"
    env:
      FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
